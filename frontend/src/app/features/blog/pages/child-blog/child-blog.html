@if (this.child) {
<div class="comment">
    <!-- Your item content here -->
    <header class="blog-header">
        <div class="user-info">
            <div class="avatar">
                <img [src]="'images/'+this.child.user.avatar" alt="{{ this.child.user.nickname }}'s avatar"
                    onerror="this.src='/default-avatar.jpg'">
            </div>
            @if (this.child.childrenCount > 0) {
            @if (!this.hidden) {
            <svg (click)="showReply()" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                role="img" aria-labelledby="aabywgtuf1orz1ksy089dqhuq0q3sv34" class="crayons-icon expanded">
                <title id="aabywgtuf1orz1ksy089dqhuq0q3sv34">Collapse</title>
                <path
                    d="M12 10.677L8 6.935 9 6l3 2.807L15 6l1 .935-4 3.742zm0 4.517L9 18l-1-.935 4-3.742 4 3.742-1 .934-3-2.805z">
                </path>
            </svg>} @else {
            <svg (click)="toggelReply()" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                role="img" aria-labelledby="ammqdi8tbu97b50465dmmzpua9r0wzik" class="crayons-icon collapsed">
                <title id="ammqdi8tbu97b50465dmmzpua9r0wzik">Expand</title>
                <path
                    d="M12 18l-4-3.771 1-.943 3 2.829 3-2.829 1 .943L12 18zm0-10.115l-3 2.829-1-.943L12 6l4 3.771-1 .942-3-2.828z">
                </path>
            </svg>
            }
            }



        </div>
    </header>


    <div class="comment-content cap">
        <div class="user-details flex-row">
            <span class="author-name">{{ this.child.user.nickname }}</span>

            <span class="post-data">
                <span class="post-date">{{ this.child.createdAt | date:'mediumDate' }}</span>
                <button (click)="$event.stopPropagation()" matIconButton [matMenuTriggerFor]="menu"
                    aria-label="Example icon-button with a menu">
                    <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #menu="matMenu">
                    @if (authService.currentUser?.id == this.child.user.id) {
                    <button mat-menu-item (click)="DeleteBlog(this.child.id)">
                        <mat-icon>delete</mat-icon>
                        <span>Delete</span>
                    </button>
                    <button mat-menu-item (click)="EditBlog(this.child.id)">
                        <mat-icon>edit</mat-icon>
                        <span>Edit</span>
                    </button>
                    }
                    <button mat-menu-item (click)="DeleteBlog(this.child.id)">
                        <mat-icon>report</mat-icon>
                        <span>Report</span>
                    </button>
                </mat-menu>

            </span>
        </div>
        <div class="comment-description">
            <pre>{{this.child.description}}</pre>
            @if(this.thread == 0 || this.thread == null) {
            <span class="thread">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img"
                    aria-labelledby="a83rno7qq0dx8sgts1cof31gne3rngkj" class="crayons-icon">
                    <title id="a83rno7qq0dx8sgts1cof31gne3rngkj">Thread</title>
                    <path
                        d="M17 13l-5 6-5-6h3.125c0-3.314 2.798-6 6.25-6 .17 0 .34.006.506.02-1.787.904-3.006 2.705-3.006 4.78V13H17z">
                    </path>
                </svg>
                Thread
            </span>
            }
        </div>
        <footer class="likes-comment">
            <div class="blog-stats ">
                <span class="stat">
                    <svg (click)="toggleLike(this.child); $event.stopPropagation()" width="20" height="20"
                        viewBox="0 0 20 20" [class.liked]="this.child.like" [class.not-liked]="!this.child.like">
                        <path d="M5.75837 1.59375H2.90332V4.48449H5.75837V1.59375Z"></path>
                        <path d="M8.60701 1.59375H5.75195V4.48449H8.60701V1.59375Z"></path>
                        <path d="M14.3043 1.59375H11.4492V4.48449H14.3043V1.59375Z"></path>
                        <path d="M17.1519 1.59375H14.2969V4.48449H17.1519V1.59375Z"></path>
                        <path d="M11.4556 4.47681H8.60059V7.36755H11.4556V4.47681Z"></path>
                        <path d="M2.91075 4.47681H0.0557022V7.36755H2.91075V4.47681Z"></path>
                        <path d="M20.0006 4.47656H17.1455V7.3673H20.0006V4.47656Z"></path>
                        <path d="M2.91075 7.36108H0.0557022V10.2518H2.91075V7.36108Z"></path>
                        <path d="M5.75837 10.2451H2.90332V13.1359H5.75837V10.2451Z"></path>
                        <path d="M8.60701 13.1289H5.75195V16.0197H8.60701V13.1289Z"></path>
                        <path d="M11.4556 16.0127H8.60059V18.9034H11.4556V16.0127Z"></path>
                        <path d="M14.3043 13.1289H11.4492V16.0196H14.3043V13.1289Z"></path>
                        <path d="M17.1519 10.2451H14.2969V13.1359H17.1519V10.2451Z"></path>
                        <path d="M20.0006 7.36133H17.1455V10.2521H20.0006V7.36133Z"></path>
                    </svg>
                    {{ this.child.likes }}
                </span>

                <span class="stat">
                    <svg (click)="showReply()" width="23" height="23" viewBox="0 0 16 16" fill="none"
                        class="text-text-primary fill-current comment-svg">
                        <path d="M12.7992 2.40002H3.19922V4.00002H12.7992V2.40002Z"></path>
                        <path d="M12.8008 10.4H4.80078V12H12.8008V10.4Z"></path>
                        <path d="M4.79922 12H3.19922V13.6H4.79922V12Z"></path>
                        <path d="M3.20156 10.4H1.60156V12H3.20156V10.4Z"></path>
                        <path d="M14.4008 4H12.8008V10.4H14.4008V4Z"></path>
                        <path d="M3.20156 4H1.60156V10.4H3.20156V4Z"></path>
                    </svg>
                    {{ this.child.childrenCount || 0 }}
                </span>
            </div>
        </footer>


    </div>

    <!-- <footer class="blog-footer likes-comment">
        <div class="blog-stats flex">
            <span class="stat">
                <svg (click)="toggleLike(this.child); $event.stopPropagation()" width="20" height="20"
                    viewBox="0 0 20 20" [class.liked]="this.child.like" [class.not-liked]="!this.child.like">
                    <path d="M5.75837 1.59375H2.90332V4.48449H5.75837V1.59375Z"></path>
                    <path d="M8.60701 1.59375H5.75195V4.48449H8.60701V1.59375Z"></path>
                    <path d="M14.3043 1.59375H11.4492V4.48449H14.3043V1.59375Z"></path>
                    <path d="M17.1519 1.59375H14.2969V4.48449H17.1519V1.59375Z"></path>
                    <path d="M11.4556 4.47681H8.60059V7.36755H11.4556V4.47681Z"></path>
                    <path d="M2.91075 4.47681H0.0557022V7.36755H2.91075V4.47681Z"></path>
                    <path d="M20.0006 4.47656H17.1455V7.3673H20.0006V4.47656Z"></path>
                    <path d="M2.91075 7.36108H0.0557022V10.2518H2.91075V7.36108Z"></path>
                    <path d="M5.75837 10.2451H2.90332V13.1359H5.75837V10.2451Z"></path>
                    <path d="M8.60701 13.1289H5.75195V16.0197H8.60701V13.1289Z"></path>
                    <path d="M11.4556 16.0127H8.60059V18.9034H11.4556V16.0127Z"></path>
                    <path d="M14.3043 13.1289H11.4492V16.0196H14.3043V13.1289Z"></path>
                    <path d="M17.1519 10.2451H14.2969V13.1359H17.1519V10.2451Z"></path>
                    <path d="M20.0006 7.36133H17.1455V10.2521H20.0006V7.36133Z"></path>
                </svg>
                {{ this.child.likes }}
            </span>

            <span class="stat">
                <svg width="23" height="23" viewBox="0 0 16 16" fill="none"
                    class="text-text-primary fill-current comment-svg">
                    <path d="M12.7992 2.40002H3.19922V4.00002H12.7992V2.40002Z"></path>
                    <path d="M12.8008 10.4H4.80078V12H12.8008V10.4Z"></path>
                    <path d="M4.79922 12H3.19922V13.6H4.79922V12Z"></path>
                    <path d="M3.20156 10.4H1.60156V12H3.20156V10.4Z"></path>
                    <path d="M14.4008 4H12.8008V10.4H14.4008V4Z"></path>
                    <path d="M3.20156 4H1.60156V10.4H3.20156V4Z"></path>
                </svg>
                {{ this.child.childrenCount || 0 }}
            </span>
        </div>
    </footer> -->
</div>
@if (this.edit) {
<h3>Editing comment</h3>
<div class="form-child">
    <form [formGroup]="formCommend" class="comments" (submit)="(submitComment())">
        <div class="comment-back cap">
            <textarea formControlName="description" class="comment-textarea" name="" id=""
                placeholder="Add a comment to the discussion" rows="5" (keydown)="onKeyDown($event,btn)"></textarea>
        </div>
        <button #btn type="submit" class="btn btn-primary">Update</button>
    </form>
</div>
} @else {
@if (this.hidden) {
<div class="form-child">
    <form [formGroup]="formCommend" class="comments" (submit)="(submitComment(this.child.id))">
        <div class="comment-back cap">
            <textarea formControlName="description" class="comment-textarea" name="" id=""
                placeholder="Add a comment to the discussion" rows="5" (keydown)="onKeyDown($event,btn)"></textarea>
        </div>
        <button #btn type="submit" class="btn btn-primary">Publish</button>
    </form>
</div>
<div [className]="this.thread != null && this.thread != 0 ? 'replays' : ''">
    @for (item of (this.child.children); track item.id) {
    <app-child-blog [thread]="this.thread != null && this.thread != 0 ? this.thread-1 : null"
        [child]="item" [parent]="this.child"></app-child-blog>
    }
</div>
}
}
}